<?php extendView('layouts/admin.phtml'); ?>

<div class="content">
	<?= HTML::link(l('new_status'), '/admin/tickets/statuses/new', array('class' => 'btn-success', 'data-overlay' => true, 'icon' => 'fas fa-fw fa-plus')) ?>
</div>
<div>
	<table class="list">
		<thead>
			<th><?= l('name') ?></th>
			<th><?= l('status') ?></th>
			<th class="w-48 text-right"><?= l('actions') ?></th>
		</thead>
		<tbody>
			<?php foreach ($statuses as $status) : ?>
				<tr>
					<td><?= HTML::link($status->name, "/admin/tickets/statuses/{$status->id}/edit", array('data-overlay' => true)) ?></td>
					<td><?= l($status->isOpen() ? 'open' : ($status->isStarted() ? 'started' : 'closed')) ?></td>
					<td>
						<div class="btn-group justify-end">
							<?= HTML::link(l('edit'), "/admin/tickets/statuses/{$status->id}/edit", ['class' => 'btn-warning btn-sm', 'data-overlay' => true, 'icon' => 'fas fa-fw fa-pencil', 'sr-only' => true]) ?>
							<a href="/admin/tickets/statuses/<?= $status->id ?>/delete" class="btn-danger btn-sm"
								x-data="popoverConfirm({ position: 'center', message: '<?= l('confirm.delete') ?>', post: true })"
								@click.prevent="toggle()">
								<i class="fas fa-fw fa-trash"></i>
								<span class="sr-only"><?= l('delete') ?></span>
							</a>
						</div>
					</td>
				</tr>
			<?php endforeach; ?>
		</tbody>
	</table>
</div>
